<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8" />
    <title>Tosspay Confirm Fail</title>
</head>

<body>
<h2> ê²°ì œ ì‹¤íŒ¨ </h2>
<p id="code"></p>
<p id="message"></p>

<button id="retryBtn" style="margin-top: 20px; padding: 10px 16px; font-size: 16px;">
    ê²°ì œ ë‹¤ì‹œ ì‹œë„í•˜ê¸°
</button>
<script>
    const urlParams = new URLSearchParams(window.location.search);

    const codeElement = document.getElementById("code");
    const messageElement = document.getElementById("message");
    const retryBtn = document.getElementById("retryBtn");


    codeElement.textContent = "ì—ëŸ¬ì½”ë“œ: " + urlParams.get("code");
    messageElement.textContent = "ì‹¤íŒ¨ ì‚¬ìœ : " + urlParams.get("message");

    const userId = urlParams.get("customerKey").substring(9);
    const tripId = urlParams.get("orderId").substring(6);
    // const amount = urlParams.get("amount");

    // ğŸ” ê²°ì œ ì¬ì‹œë„ â†’ ready í˜ì´ì§€ ì´ë™
    retryBtn.addEventListener("click", () => {
        // ê²°ì œ ì¤€ë¹„ í˜ì´ì§€ ì£¼ì†Œë¡œ ì´ë™ (ì˜ˆ: /ready.html)
        window.location.href = "/api/v1/payments/tosspay/ready?userId="+userId+"&role=PASSENGER&tripId="+tripId;

        // ë§Œì•½ orderIdê°€ í•„ìš”í•˜ë©´ URLì— ë¶™ì—¬ì„œ ë³´ë‚¼ ìˆ˜ë„ ìˆìŒ
        // window.location.href = `/ready.html?orderId=${urlParams.get("orderId")}`;
    });
</script>
</body>
</html>